<div id="<%= dom_id(recipe, :ai_instructions) %>">
  <% if recipe.ai_instructions.present? && recipe.ai_instructions_status == "ready" %>
    <div class="alert alert-success mb-0">
      <h6 class="mb-2">Alchemist advice on cooking</h6>
      <div class="mb-0 small" style="white-space: pre-wrap; word-wrap: break-word;"><%= recipe.ai_instructions %></div>
      <% if recipe.ai_instructions_generated_at.present? %>
        <small class="text-muted d-block mt-1">Generated at <%= l(recipe.ai_instructions_generated_at, format: :short) %></small>
      <% end %>
    </div>
  <% elsif recipe.ai_instructions_status == "pending" %>
    <div class="alert alert-info d-flex align-items-center mb-0">
      <div class="spinner-border spinner-border-sm me-2" role="status"></div>
      Generating AI instructions...
    </div>
  <% elsif recipe.ai_instructions_status == "failed" %>
    <div class="alert alert-danger mb-0">
      Failed to generate AI instructions.
      <% if recipe.ai_instructions_error.present? %>
        <details class="mt-1">
          <summary>Error details</summary>
          <pre class="mb-0"><%= recipe.ai_instructions_error %></pre>
        </details>
      <% end %>
    </div>
  <% else %>
    <div class="text-muted small text-center py-3">
      <i class="bi bi-magic me-1"></i>Click "Ask Alchemist how to cook it" to generate cooking steps
    </div>
  <% end %>
</div>
