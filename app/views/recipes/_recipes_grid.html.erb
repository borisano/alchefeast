<%= turbo_frame_tag "recipes-grid" do %>
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">
          <%= recipes.total_count %> Recipe<%= 's' if recipes.total_count != 1 %> Found
          <% if params[:category].present? %>
            in <span class="text-primary"><%= params[:category] %></span>
          <% end %>
          <% if params[:q].present? %>
            for "<span class="text-primary"><%= params[:q] %></span>"
          <% end %>
          <% if params[:ingredients].present? %>
            with ingredients: <span class="text-success"><%= params[:ingredients] %></span>
          <% end %>
        </h4>
        <% if recipes.respond_to?(:current_page) && recipes.total_count > 0 %>
          <small class="text-muted">
            Showing <%= recipes.offset_value + 1 %>-<%= [recipes.offset_value + recipes.limit_value, recipes.total_count].min %> 
            of <%= recipes.total_count %> recipes
          </small>
        <% end %>
      </div>
      
      <div class="row">
        <% recipes.each do |recipe| %>
          <div class="col-xl-3 col-lg-4 col-md-6 mb-4">
            <%= render 'recipe_card', recipe: recipe %>
          </div>
        <% end %>
      </div>
      
      <!-- Pagination inside recipes-grid frame -->
      <% if recipes.respond_to?(:current_page) %>
        <div class="row">
          <div class="col-12 d-flex justify-content-center mt-4" data-controller="turbo">
            <%= paginate recipes, 
                window: 2, 
                params: { 
                  category: params[:category], 
                  q: params[:q], 
                  ingredients: params[:ingredients],
                  search_type: params[:search_type]
                }.compact %>
          </div>
        </div>
      <% end %>
      
      <% if recipes.empty? %>
        <div class="text-center py-5">
          <div class="mb-4">
            <i class="bi bi-search display-1 text-muted"></i>
          </div>
          <h4 class="text-muted">No recipes found</h4>
          <p class="text-muted">Try adjusting your filters or search for different ingredients.</p>
          <%= link_to "View All Recipes", recipes_path, class: "btn btn-primary", data: { turbo_frame: "recipes-grid" } %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
